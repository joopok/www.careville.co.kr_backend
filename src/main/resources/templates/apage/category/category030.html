<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/apage/default_layout}">
<head>
<title>카테고리 등록</title>
<!-- All styles now in careville-admin.css -->
<script th:src="@{/apage/js/category030.js}"></script>
</head>
<body>
<div layout:fragment="content">

	<!-- Page Header -->
	<div class="cv-page-header">
		<div class="cv-page-header-left">
			<h1 class="cv-page-title">카테고리 등록</h1>
			<p class="cv-page-desc">새로운 서비스 카테고리를 등록합니다</p>
		</div>
		<div class="cv-page-header-right">
			<button type="button" class="cv-btn cv-btn-secondary" onclick="location.href='/apage/category010.do'">
				<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<line x1="8" y1="6" x2="21" y2="6"></line>
					<line x1="8" y1="12" x2="21" y2="12"></line>
					<line x1="8" y1="18" x2="21" y2="18"></line>
					<line x1="3" y1="6" x2="3.01" y2="6"></line>
					<line x1="3" y1="12" x2="3.01" y2="12"></line>
					<line x1="3" y1="18" x2="3.01" y2="18"></line>
				</svg>
				목록
			</button>
		</div>
	</div>

	<!-- Form Card -->
	<div class="cv-card">
		<div class="cv-card-body">
			<form id="serviceForm" method="post" action="#">

				<!-- 서비스 코드, 서비스명 -->
				<div class="cv-detail-grid">
					<div class="cv-detail-item">
						<div class="cv-detail-label">서비스 코드 <span class="required">*</span></div>
						<input type="text" class="cv-form-input w-auto" id="serviceCd" name="serviceCd"
							   placeholder="예: 012" maxlength="3" required>
						<div class="cv-form-hint">3자리 숫자로 입력하세요</div>
					</div>
					<div class="cv-detail-item">
						<div class="cv-detail-label">서비스명 <span class="required">*</span></div>
						<input type="text" class="cv-form-input" id="serviceNm" name="serviceNm"
							   placeholder="서비스명을 입력하세요" maxlength="100" required>
					</div>
				</div>

				<!-- 정렬 순서, 사용 여부 -->
				<div class="cv-detail-grid">
					<div class="cv-detail-item">
						<div class="cv-detail-label">정렬 순서</div>
						<input type="number" class="cv-form-input w-auto" id="serviceOrder" name="serviceOrder"
							   placeholder="1" min="1">
						<div class="cv-form-hint">미입력시 자동 설정됩니다</div>
					</div>
					<div class="cv-detail-item">
						<div class="cv-detail-label">사용 여부</div>
						<div class="cv-radio-group">
							<div class="cv-radio-item">
								<input type="radio" name="useYn" id="useY" value="Y" checked>
								<label for="useY">사용</label>
							</div>
							<div class="cv-radio-item">
								<input type="radio" name="useYn" id="useN" value="N">
								<label for="useN">미사용</label>
							</div>
						</div>
					</div>
				</div>

				<!-- 버튼 -->
				<div class="cv-btn-group">
					<button type="button" class="cv-btn cv-btn-primary" onclick="saveServiceCategory()">
						<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
							<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
							<polyline points="17 21 17 13 7 13 7 21"></polyline>
							<polyline points="7 3 7 8 15 8"></polyline>
						</svg>
						등록
					</button>
					<button type="button" class="cv-btn cv-btn-secondary" onclick="location.href='/apage/category010.do'">
						취소
					</button>
				</div>

			</form>
		</div>
	</div>

	<script th:inline="javascript">
		function saveServiceCategory() {
			var serviceCd = $('#serviceCd').val().trim();
			var serviceNm = $('#serviceNm').val().trim();

			if (!serviceCd) {
				swal({title: '서비스 코드를 입력하세요.', type: 'warning'});
				$('#serviceCd').focus();
				return;
			}

			if (!/^\d{3}$/.test(serviceCd)) {
				swal({title: '서비스 코드는 3자리 숫자로 입력하세요.', type: 'warning'});
				$('#serviceCd').focus();
				return;
			}

			if (!serviceNm) {
				swal({title: '서비스명을 입력하세요.', type: 'warning'});
				$('#serviceNm').focus();
				return;
			}

			$.ajax({
				url: '/apage/category031.do',
				type: 'POST',
				data: $('#serviceForm').serialize(),
				dataType: 'json',
				success: function(data) {
					if (data.result && data.result.result === 'SUCCESS') {
						swal({title: data.result.msg, type: 'success'}, function() {
							location.href = '/apage/category010.do';
						});
					} else {
						swal({title: data.result.msg || '등록에 실패하였습니다.', type: 'error'});
					}
				},
				error: function() {
					swal({title: '서버 오류가 발생하였습니다.', type: 'error'});
				}
			});
		}
	</script>

</div>
</body>
</html>
